<h2 class="text-center">Add New Professor</h2>
<div class="d-flex d-flex-column justify-content-center">
  <form class="d-flex w-50 justify-content-center" [formGroup]="professorForm" *ngIf="professorForm" (ngSubmit)="onSubmit()">
    <div class="col-md-8 col-lg-6">

      <div class="from-group">
        <label for="firstname">Firstname: </label>
        <input id="firstname" class="form-control" placeholder="Firstname"  type="text" formControlName="firstname" />
        <div class="alert alert-danger" *ngIf="hasErrors('firstname')">
          <span *ngIf="hasErrors('firstname','required')" >
            <small>This field is required</small>
          </span>
          <span *ngIf="hasErrors('firstname','minlength')" >
            <small>This value must have minimum {{this.professorForm.get('firstname')?.errors?.['minlength']['requiredLength'] }} characters</small>
          </span>
        </div>
      </div>

      <div class="from-group">
        <label for="lastname">Lastname: </label>
        <input id="lastname" class="form-control" placeholder="Lastname"  type="text" formControlName="lastname" />
        <div class="alert alert-danger" *ngIf="hasErrors('lastname')">
          <span *ngIf="hasErrors('lastname','required')" >
            <small>This field is required</small>
          </span>
          <span *ngIf="hasErrors('lastname','minlength')" >
            <small>This value must have minimum {{this.professorForm.get('lastname')?.errors?.['minlength']['requiredLength'] }} characters</small>
          </span>
        </div>
      </div>

      <div class="from-group">
        <label for="phone">Phone: </label>
        <input id="phone" class="form-control" placeholder="Phone"  type="text" formControlName="phone" />
        <div class="alert alert-danger" *ngIf="hasErrors('phone')">
          <span *ngIf="hasErrors('phone','minlength')" >
            <small>This value must have minimum {{this.professorForm.get('phone')?.errors?.['minlength']['requiredLength'] }} characters</small>
          </span>
        </div>
      </div>

      <div class="from-group">
        <label for="address">Address: </label>
        <input id="address" class="form-control" placeholder="Address"  type="text" formControlName="address" />
        <div class="alert alert-danger" *ngIf="hasErrors('address')">
          <span *ngIf="hasErrors('address','minlength')" >
            <small>This value must have minimum {{this.professorForm.get('address')?.errors?.['minlength']['requiredLength'] }} characters</small>
          </span>
        </div>
      </div>

      <div class="from-group">
        <label for="email">Email: </label>
        <input id="email" class="form-control" placeholder="e-mail"  type="text" formControlName="email" />
        <span *ngIf="hasErrors('email', 'email')" class="error">
          <small>Invalid e-mail</small>
        </span>
      </div>

      <div class="from-group">
        <label for="postalCode">City: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </label>
        <select name="postalCode" id="postalCode"  formControlName="postalCode">
          <option *ngFor="let city of cities" [ngValue]="city">{{city.name}}</option>
        </select>
        <div class="alert alert-danger" *ngIf="hasErrors('postalCode')">
          <span *ngIf="hasErrors('postalCode','required')" >
            <small>This field is required</small>
          </span>
        </div>
      </div>

      <div class="from-group">
        <label for="title">Title: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </label>
        <select name="title" id="title"  formControlName="title">
          <option *ngFor="let title of titles" [ngValue]="title">{{title.name}}</option>
        </select>
        <div class="alert alert-danger" *ngIf="hasErrors('title')">
          <span *ngIf="hasErrors('title','required')" >
            <small>This field is required</small>
          </span>
        </div>
      </div>

      <div class="from-group">
        <label for="reelectionDate">Reelection Date:</label>
        <input id="reelectionDate" class="form-control" placeholder="reelectionDate"  type="date" formControlName="reelectionDate" />
        <div class="alert alert-danger" *ngIf="hasErrors('reelectionDate')">
          <span *ngIf="hasErrors('reelectionDate','required')" >
            <small>This field is required</small>
          </span>
        </div>
      </div>


      <div class="form-group mb-3 d-flex flex-column">
        <label class="form-label">Subjects:</label>
        <select
          type="text"
          [(ngModel)]="selectedSubject"
          class="form-control"
          [ngModelOptions]="{standalone: true}"
        >
          <option *ngFor="let subject of subjects" [ngValue]="subject">
            {{ subject.name + " " + subject.semesterName }}
          </option>
        </select>
        <button type="button" class="btn btn-secondary" (click)="addSubject()">Add</button>

        <div class="d-flex flex-row" >
          <span *ngFor="let subject of selectedSubjects;let i = index" class="badge rounded-pill bg-secondary">
            {{ subject.name + " " + subject.semesterName }}
           <span class="chip-delete" (click)="removeSubject(i)">X</span>
          </span>
        </div>
      </div>


      <div class="d-flex flex-row-reverse mt-2">
        <button type="submit" class="btn btn-outline-success" >Save</button>
        <button class="btn btn-outline-success" routerLink="/professor/professor-list" queryParamsHandling="preserve">Get back</button>
      </div>
    </div>

  </form>
</div>
